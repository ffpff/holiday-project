<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深圳到大理三日游 - 旅行规划表</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        @media print {
            @page {
                size: A4;
                margin: 10mm;
            }
            
            .no-print {
                display: none !important;
            }
            
            * {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
            padding: 20px;
        }

        .travel-plan {
            width: 210mm;
            min-height: 297mm;
            background: white;
            margin: 0 auto;
            padding: 10mm;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            position: relative;
        }

        .save-image-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
            transition: all 0.3s ease;
        }

        .save-image-button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 3px solid #007bff;
            padding-bottom: 15px;
        }

        .main-title {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 18px;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .travel-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .info-card .icon {
            font-size: 24px;
            color: #007bff;
            margin-bottom: 8px;
        }

        .info-card .title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #495057;
        }

        .info-card .content {
            font-size: 14px;
            color: #6c757d;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 4px solid #007bff;
        }

        .itinerary-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .itinerary-table th,
        .itinerary-table td {
            border: 1px solid #dee2e6;
            padding: 12px 8px;
            text-align: left;
            vertical-align: top;
        }

        .itinerary-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .itinerary-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .location-link {
            color: #007bff;
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .location-link:hover {
            color: #0056b3;
            background: #e7f1ff;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .activity-icon {
            margin-right: 5px;
            color: #007bff;
        }

        .time-column {
            width: 15%;
            font-weight: 600;
            background: #e3f2fd !important;
        }

        .activity-column {
            width: 25%;
        }

        .location-column {
            width: 35%;
        }

        .details-column {
            width: 25%;
        }

        .weather-info {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .weather-day {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
        }

        .weather-day .date {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .weather-day .temp {
            font-size: 18px;
            font-weight: 700;
        }

        .route-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .tips-section {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
        }

        .tips-list {
            list-style: none;
            padding-left: 0;
        }

        .tips-list li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .tips-list li:before {
            content: "💡";
            position: absolute;
            left: 0;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .contact-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .price-tag {
            background: #ff6b6b;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 5px;
        }

        .day-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0 15px 0;
            text-align: center;
            font-weight: 600;
            font-size: 18px;
        }

        @media screen and (max-width: 768px) {
            .travel-plan {
                width: 100%;
                margin: 0;
                padding: 15px;
            }
            
            .travel-info {
                grid-template-columns: 1fr;
            }
            
            .weather-grid {
                grid-template-columns: 1fr;
            }
            
            .contact-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <button class="save-image-button no-print" onclick="saveAsImage()">
        <i class="fas fa-download"></i> 保存为图片
    </button>

    <div class="travel-plan">
        <!-- 标题区 -->
        <div class="header">
            <h1 class="main-title">深圳到大理三日游</h1>
            <p class="subtitle">2025年6月1日 - 6月3日 • 苍山洱海之约</p>
        </div>

        <!-- 基本信息 -->
        <div class="travel-info">
            <div class="info-card">
                <div class="icon"><i class="fas fa-calendar-alt"></i></div>
                <div class="title">旅行时长</div>
                <div class="content">3天2夜</div>
            </div>
            <div class="info-card">
                <div class="icon"><i class="fas fa-map-marker-alt"></i></div>
                <div class="title">目的地</div>
                <div class="content">云南大理</div>
            </div>
            <div class="info-card">
                <div class="icon"><i class="fas fa-users"></i></div>
                <div class="title">适合人群</div>
                <div class="content">情侣/朋友</div>
            </div>
        </div>

        <!-- 天气信息 -->
        <div class="weather-info">
            <h3 style="text-align: center; margin-bottom: 15px;">
                <i class="fas fa-cloud-sun"></i> 三日天气预报
            </h3>
            <div class="weather-grid">
                <div class="weather-day">
                    <div class="date">6月1日 (日)</div>
                    <div class="temp">26°C / 17°C</div>
                    <div>多云转小雨</div>
                </div>
                <div class="weather-day">
                    <div class="date">6月2日 (一)</div>
                    <div class="temp">22°C / 14°C</div>
                    <div>小雨</div>
                </div>
                <div class="weather-day">
                    <div class="date">6月3日 (二)</div>
                    <div class="temp">24°C / 17°C</div>
                    <div>阴转阵雨</div>
                </div>
            </div>
        </div>

        <!-- Day 1 -->
        <div class="day-header">
            <i class="fas fa-plane"></i> Day 1 - 深圳到大理 (6月1日)
        </div>
        
        <table class="itinerary-table">
            <thead>
                <tr>
                    <th class="time-column">时间</th>
                    <th class="activity-column">活动</th>
                    <th class="location-column">地点</th>
                    <th class="details-column">详情</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>07:00-10:30</td>
                    <td><i class="fas fa-plane activity-icon"></i>航班</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.320952, 25.646965, '大理凤仪机场')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>深圳→大理机场
                        </a>
                    </td>
                    <td>建议航班：深圳宝安机场出发<span class="price-tag">¥800-1200</span></td>
                </tr>
                <tr>
                    <td>11:00-12:30</td>
                    <td><i class="fas fa-car activity-icon"></i>交通+入住</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>大理古城
                        </a>
                    </td>
                    <td>机场大巴或出租车前往古城，办理入住</td>
                </tr>
                <tr>
                    <td>13:00-14:30</td>
                    <td><i class="fas fa-utensils activity-icon"></i>午餐</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城美食街')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>古城内特色餐厅
                        </a>
                    </td>
                    <td>品尝白族三道茶、乳扇等特色美食<span class="price-tag">¥80-120</span></td>
                </tr>
                <tr>
                    <td>15:00-18:00</td>
                    <td><i class="fas fa-camera activity-icon"></i>游览</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>大理古城
                        </a>
                    </td>
                    <td>漫步古城，参观五华楼、人民路步行街<span class="price-tag">免费</span></td>
                </tr>
                <tr>
                    <td>19:00-21:00</td>
                    <td><i class="fas fa-utensils activity-icon"></i>晚餐</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '人民路')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>人民路酒吧街
                        </a>
                    </td>
                    <td>体验古城夜生活，品尝当地小吃<span class="price-tag">¥100-150</span></td>
                </tr>
            </tbody>
        </table>

        <!-- Day 2 -->
        <div class="day-header">
            <i class="fas fa-mountain"></i> Day 2 - 苍山洱海一日游 (6月2日)
        </div>
        
        <table class="itinerary-table">
            <thead>
                <tr>
                    <th class="time-column">时间</th>
                    <th class="activity-column">活动</th>
                    <th class="location-column">地点</th>
                    <th class="details-column">详情</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>08:00-09:00</td>
                    <td><i class="fas fa-utensils activity-icon"></i>早餐</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>古城内
                        </a>
                    </td>
                    <td>传统白族早餐：饵丝、豆浆油条<span class="price-tag">¥20-30</span></td>
                </tr>
                <tr>
                    <td>09:30-12:00</td>
                    <td><i class="fas fa-pagelines activity-icon"></i>参观</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.143044, 25.704129, '崇圣寺三塔')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>崇圣寺三塔
                        </a>
                    </td>
                    <td>大理标志性景点，佛教文化圣地<span class="price-tag">¥120</span></td>
                </tr>
                <tr>
                    <td>13:00-14:30</td>
                    <td><i class="fas fa-utensils activity-icon"></i>午餐</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.266116, 25.643582, '洱海边餐厅')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>洱海边餐厅
                        </a>
                    </td>
                    <td>品尝洱海鱼、白族风味菜<span class="price-tag">¥120-180</span></td>
                </tr>
                <tr>
                    <td>15:00-18:00</td>
                    <td><i class="fas fa-water activity-icon"></i>游览</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.266116, 25.643582, '洱海')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>洱海环湖游
                        </a>
                    </td>
                    <td>租电动车环湖，欣赏苍山洱海美景<span class="price-tag">¥60-80</span></td>
                </tr>
                <tr>
                    <td>18:30-20:00</td>
                    <td><i class="fas fa-camera activity-icon"></i>观景</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.266116, 25.643582, '洱海')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>洱海日落点
                        </a>
                    </td>
                    <td>观赏洱海日落，拍摄美景<span class="price-tag">免费</span></td>
                </tr>
            </tbody>
        </table>

        <!-- Day 3 -->
        <div class="day-header">
            <i class="fas fa-home"></i> Day 3 - 喜洲古镇及返程 (6月3日)
        </div>
        
        <table class="itinerary-table">
            <thead>
                <tr>
                    <th class="time-column">时间</th>
                    <th class="activity-column">活动</th>
                    <th class="location-column">地点</th>
                    <th class="details-column">详情</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>08:00-09:00</td>
                    <td><i class="fas fa-utensils activity-icon"></i>早餐</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>酒店早餐
                        </a>
                    </td>
                    <td>退房，寄存行李<span class="price-tag">含在住宿</span></td>
                </tr>
                <tr>
                    <td>09:30-12:00</td>
                    <td><i class="fas fa-building activity-icon"></i>游览</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.131582, 25.852950, '喜洲古镇')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>喜洲古镇
                        </a>
                    </td>
                    <td>白族民居建筑，品尝喜洲粑粑<span class="price-tag">¥60-80</span></td>
                </tr>
                <tr>
                    <td>12:30-13:30</td>
                    <td><i class="fas fa-utensils activity-icon"></i>午餐</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.131582, 25.852950, '喜洲古镇')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>喜洲特色餐厅
                        </a>
                    </td>
                    <td>白族特色菜：砂锅鱼、酸辣鱼<span class="price-tag">¥80-120</span></td>
                </tr>
                <tr>
                    <td>14:00-15:30</td>
                    <td><i class="fas fa-shopping-bag activity-icon"></i>购物</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>古城购物街
                        </a>
                    </td>
                    <td>购买纪念品：银饰、扎染布艺<span class="price-tag">¥100-300</span></td>
                </tr>
                <tr>
                    <td>16:00-18:30</td>
                    <td><i class="fas fa-plane activity-icon"></i>返程</td>
                    <td>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.320952, 25.646965, '大理凤仪机场')" class="location-link">
                            <i class="fas fa-map-marker-alt activity-icon"></i>大理机场→深圳
                        </a>
                    </td>
                    <td>前往机场，返回深圳<span class="price-tag">¥800-1200</span></td>
                </tr>
            </tbody>
        </table>

        <!-- 交通信息 -->
        <div class="section">
            <h2 class="section-title"><i class="fas fa-route"></i> 交通信息</h2>
            <div class="route-info">
                <p><strong>深圳→大理：</strong>建议乘坐飞机，飞行时间约3.5小时，票价800-1200元</p>
                <p><strong>大理机场→古城：</strong>机场大巴20元/人，约40分钟；出租车约80-100元</p>
                <p><strong>市内交通：</strong>电动车租赁60-80元/天，出租车起步价8元</p>
            </div>
        </div>

        <!-- 住宿推荐 -->
        <div class="section">
            <h2 class="section-title"><i class="fas fa-bed"></i> 住宿推荐</h2>
            <div class="contact-grid">
                <div class="contact-card">
                    <h4>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.164000, 25.694836, '大理古城民宿')" class="location-link">
                            大理古城精品民宿
                        </a>
                    </h4>
                    <p>地址：古城内人民路附近</p>
                    <p>价格：280-480元/晚</p>
                    <p>特色：白族建筑风格，庭院景观</p>
                </div>
                <div class="contact-card">
                    <h4>
                        <a href="javascript:void(0)" onclick="navigateToLocation(100.266116, 25.643582, '洱海边酒店')" class="location-link">
                            洱海边度假酒店
                        </a>
                    </h4>
                    <p>地址：洱海环湖路</p>
                    <p>价格：500-800元/晚</p>
                    <p>特色：海景房，无边泳池</p>
                </div>
            </div>
        </div>

        <!-- 实用贴士 -->
        <div class="section">
            <h2 class="section-title"><i class="fas fa-lightbulb"></i> 实用贴士</h2>
            <div class="tips-section">
                <ul class="tips-list">
                    <li>6月是大理雨季，请携带雨具和防晒用品</li>
                    <li>大理海拔约2000米，注意防晒和保湿</li>
                    <li>古城内多为石板路，建议穿舒适的平底鞋</li>
                    <li>品尝当地美食时，注意肠胃适应</li>
                    <li>洱海环保要求严格，请勿在湖边乱扔垃圾</li>
                    <li>拍照时请尊重当地民族文化和习俗</li>
                </ul>
            </div>
        </div>

        <!-- 紧急联系方式 -->
        <div class="section">
            <h2 class="section-title"><i class="fas fa-phone"></i> 紧急联系方式</h2>
            <div class="contact-grid">
                <div class="contact-card">
                    <h4>紧急救援</h4>
                    <p>报警电话：110</p>
                    <p>急救电话：120</p>
                    <p>消防电话：119</p>
                </div>
                <div class="contact-card">
                    <h4>旅游服务</h4>
                    <p>大理旅游咨询：0872-2329197</p>
                    <p>交通问询：12306（火车）</p>
                    <p>天气查询：12121</p>
                </div>
            </div>
        </div>

        <!-- 预算概览 -->
        <div class="section">
            <h2 class="section-title"><i class="fas fa-calculator"></i> 预算概览</h2>
            <table class="itinerary-table">
                <thead>
                    <tr>
                        <th>项目</th>
                        <th>费用</th>
                        <th>备注</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>往返机票</td>
                        <td>1600-2400元</td>
                        <td>提前预订可优惠</td>
                    </tr>
                    <tr>
                        <td>住宿费用</td>
                        <td>560-1600元</td>
                        <td>2晚住宿</td>
                    </tr>
                    <tr>
                        <td>餐饮费用</td>
                        <td>600-900元</td>
                        <td>3天餐费</td>
                    </tr>
                    <tr>
                        <td>景点门票</td>
                        <td>180-250元</td>
                        <td>主要景点</td>
                    </tr>
                    <tr>
                        <td>交通费用</td>
                        <td>200-300元</td>
                        <td>市内交通</td>
                    </tr>
                    <tr style="background: #e8f5e8; font-weight: bold;">
                        <td>总计</td>
                        <td>3140-5450元</td>
                        <td>人均预算</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // 保存为图片功能
        function saveAsImage() {
            const loadingDiv = document.createElement('div');
            loadingDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 正在生成图片...';
            loadingDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 20px 30px;
                border-radius: 10px;
                z-index: 9999;
                font-size: 16px;
                text-align: center;
            `;
            document.body.appendChild(loadingDiv);
            
            html2canvas(document.querySelector('.travel-plan'), {
                scale: 2,
                format: 'png',
                backgroundColor: 'white',
                useCORS: true,
                logging: false,
                allowTaint: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = '深圳到大理三日游_2025年6月.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                document.body.removeChild(loadingDiv);
                
                // 显示成功提示
                const successDiv = document.createElement('div');
                successDiv.innerHTML = '<i class="fas fa-check-circle"></i> 图片已保存成功！';
                successDiv.style.cssText = loadingDiv.style.cssText.replace('rgba(0,0,0,0.8)', 'rgba(40,167,69,0.9)');
                document.body.appendChild(successDiv);
                setTimeout(() => {
                    document.body.removeChild(successDiv);
                }, 2000);
            }).catch(err => {
                console.error('图片生成失败:', err);
                document.body.removeChild(loadingDiv);
                const errorDiv = document.createElement('div');
                errorDiv.innerHTML = '<i class="fas fa-exclamation-triangle"></i> 图片生成失败，请重试';
                errorDiv.style.cssText = loadingDiv.style.cssText.replace('rgba(0,0,0,0.8)', 'rgba(220,53,69,0.9)');
                document.body.appendChild(errorDiv);
                setTimeout(() => {
                    document.body.removeChild(errorDiv);
                }, 3000);
            });
        }

        // 高德地图导航功能
        function navigateToLocation(lat, lon, name) {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const amapUrl = `amapuri://openFeature?featureName=OnLocationDest&lat=${lat}&lon=${lon}&dev=0&style=2&name=${encodeURIComponent(name)}`;
            
            if (isMobile) {
                // 移动端直接跳转高德地图
                window.location.href = amapUrl;
                // 备用方案：如果高德地图未安装，跳转到网页版
                setTimeout(() => {
                    const webUrl = `https://uri.amap.com/marker?position=${lon},${lat}&name=${encodeURIComponent(name)}&src=myapp&coordinate=gaode&callnative=1`;
                    window.open(webUrl, '_blank');
                }, 2000);
            } else {
                // PC端打开网页版高德地图
                const webUrl = `https://uri.amap.com/marker?position=${lon},${lat}&name=${encodeURIComponent(name)}&src=myapp&coordinate=gaode&callnative=1`;
                window.open(webUrl, '_blank');
            }
        }

        // 添加页面加载完成后的优化
        document.addEventListener('DOMContentLoaded', function() {
            // 为所有导航链接添加悬停效果
            const locationLinks = document.querySelectorAll('.location-link');
            locationLinks.forEach(link => {
                link.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.transition = 'all 0.3s ease';
                });
                
                link.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
</body>
</html> 